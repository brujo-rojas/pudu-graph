<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Lit + TS</title>
    <script type="module" src="/src/pudu-graph.ts"></script>
  </head>
  <body>
    <pudu-graph loading="true"></pudu-graph>

    <script type="module">
      const graphElement = document.querySelector("pudu-graph");
      const config = {
        options: {
          startUnix: Date.parse("2025-05-20T00:00:00Z") / 1000,
          endUnix: Date.parse("2025-08-20T00:00:00Z") / 1000,

          itemHeight: 60, // Altura de los items/filas en píxeles
          flexBoxHeight: 20, // Altura del contenedor flexible de la barra
          dayWidth: 30, // Ancho de cada día en la línea de tiempo
          
          // Opciones de optimización
          floatboxHeight: 16, // Altura del floatbox en píxeles
          maxOverlapLevels: 5, // Máximo número de niveles de solapamiento
          enableVirtualization: true, // Habilitar virtualización
          cacheSize: 1000, // Tamaño del cache

          header: {},
          sidebar: {
            width: 500,
            appendWidth: 50,
            columns: [
              {
                id: "id",
                label: "ID",
                field: "id",
                type: "text",
                width: 50,
              },
              {
                id: "ha",
                label: "HA",
                field: "ha",
                type: "input",
                width: 60,
              },
              {
                id: "hour",
                label: "hour",
                field: "hour",
                type: "hour",
                width: 60,
              },
            ],
          },
        },

        data: [
          {
            id: 1,
            label: "N 1",
            tooltip: "Tooltip 1",
            values: {},
            rowData: [
              {
                startUnix: Date.parse("2025-05-23T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-05-27T10:00:00Z") / 1000,
                color: "#3498db",
                label: "Elemento 1"
              },

              {
                startUnix: Date.parse("2025-05-28T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-05-30T10:00:00Z") / 1000,
                color: "red",
                label: "Elemento 2"
              },

              {
                startUnix: Date.parse("2025-05-25T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-05-31T10:00:00Z") / 1000,
                color: "green",
                label: "Elemento 3"
              },

              {
                startUnix: Date.parse("2025-05-25T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-01T01:00:00Z") / 1000,
                color: "yellow",
                label: "Elemento 4"
              },



              {
                startUnix: Date.parse("2025-06-03T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T00:00:00Z") / 1000,
                color: "blue",
                label: "Elemento 5"
              },
              {
                startUnix: Date.parse("2025-06-03T02:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T02:00:00Z") / 1000,
                color: "red",
                label: "Elemento 6"
              },
              {
                startUnix: Date.parse("2025-06-03T04:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T04:00:00Z") / 1000,
                color: "green",
                label: "Elemento 7"
              },
              {
                startUnix: Date.parse("2025-06-03T06:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T06:00:00Z") / 1000,
                color: "yellow",
                label: "Elemento 8"
              },
              {
                startUnix: Date.parse("2025-06-03T08:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T08:00:00Z") / 1000,
                color: "blue",
                label: "Elemento 9"
              },
              {
                startUnix: Date.parse("2025-06-03T10:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-04T10:00:00Z") / 1000,
                color: "red",
                label: "Elemento 10"
              },


            ],
          },
          {
            id: 2,
            label: "N 2",
            tooltip: "Tooltip 2",
            values: {},
            rowData: [
              {
                startUnix: Date.parse("2025-06-01T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-03T00:00:00Z") / 1000,
                color: "#9b59b6",
                label: "Elemento fila 2"
              }
            ]
          },
          {
            id: 3,
            label: "N 3",
            tooltip: "Tooltip 3 - Con drag y resize habilitados",
            values: {},
            rowData: [
              {
                startUnix: Date.parse("2025-06-10T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-15T00:00:00Z") / 1000,
                color: "#e74c3c",
                label: "Arrastra y redimensiona",
                interactions: {
                  enableDrag: true,
                  enableResize: true,
                  enableLeftResize: true,
                  enableRightResize: true,
                  dragHorizontalOnly: true
                }
              },
              {
                startUnix: Date.parse("2025-06-20T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-06-25T00:00:00Z") / 1000,
                color: "#9b59b6",
                label: "Solo resize derecho",
                interactions: {
                  enableDrag: false,
                  enableResize: true,
                  enableLeftResize: false,
                  enableRightResize: true
                }
              },
              {
                startUnix: Date.parse("2025-07-01T00:00:00Z") / 1000,
                endUnix: Date.parse("2025-07-05T00:00:00Z") / 1000,
                color: "#f39c12",
                label: "Solo drag",
                interactions: {
                  enableDrag: true,
                  enableResize: false
                }
              }
            ]
          },
          {
            id: 4,
            label: "N 4",
            tooltip: "Tooltip 4",
            values: {},
          },
          {
            id: 5,
            label: "N 5",
            tooltip: "Tooltip 5",
            values: {},
          },
          {
            id: 6,
            label: "N 6",
            tooltip: "Tooltip 6",
          },
        ],
      };
      if (graphElement) {
        //cambiar el estado de Loading
        setTimeout(() => {
          if (graphElement.setLoading) {
            graphElement.setLoading(false);
            graphElement.initialize(config);
          }
        }, 200);
      }
    </script>
  </body>
</html>
